<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Insights Dashboard</title>

<style>
/* ---------------- Global Reset ---------------- */
* {
    box-sizing: border-box;
}

html, body {
    margin: 0;
    padding: 0;
    height: 100%;
    overflow: hidden;
    font-family: Arial, Helvetica, sans-serif;
    background: #f4f6f8;
}

/* ---------------- Header ---------------- */
.header {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 70px;
    background: linear-gradient(135deg, #1abc9c, #16a085);
    color: #fff;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 34px;
    font-weight: 700;
    letter-spacing: 1px;
    z-index: 1000;
    box-shadow: 0 2px 6px rgba(0,0,0,0.2);
}

/* ---------------- Tabs ---------------- */
.tabs {
    position: fixed;
    top: 70px;
    left: 0;
    width: 100%;
    height: 56px;
    background: #ffffff;
    display: flex;
    border-bottom: 1px solid #ddd;
    z-index: 900;
}

.tab-button {
    flex: 0 0 auto;
    padding: 0 24px;
    height: 56px;
    border: none;
    background: none;
    cursor: pointer;
    font-size: 16px;
    font-weight: 600;
    color: #333;
}

.tab-button.active {
    color: #1abc9c;
    border-bottom: 4px solid #1abc9c;
}

/* ---------------- Content Area ---------------- */
.content {
    position: absolute;
    top: 126px; /* header (70) + tabs (56) */
    left: 0;
    width: 100%;
    height: calc(100vh - 126px);
}

/* ---------------- Tab Content ---------------- */
.tab-content {
    display: none;
    width: 100%;
    height: 100%;
}

.tab-content.active-tab {
    display: block;
}

/* ---------------- Looker Studio ---------------- */
.looker-container {
    position: relative;
    width: 100%;
    height: 100%;
    overflow: hidden;
}

.looker-container iframe {
    position: absolute;
    top: 0;
    left: 0;
    width: 2000px;
    height: 1400px;
    border: none;
    transform-origin: top left;
}

/* ---------------- PForm ---------------- */
.PForm-container {
    width: 100%;
    height: 100%;
}

.PForm-container iframe {
    width: 100%;
    height: 100%;
    border: none;
}
</style>
</head>

<body>

<!-- Header -->
<div class="header">
    Insights
</div>

<!-- Tabs -->
<div class="tabs">
    <button class="tab-button" onclick="openTab(event,'Baraqah')">Baraqah-IT</button>
    <button class="tab-button" onclick="openTab(event,'PForm')">PForm</button>
</div>

<!-- Content -->
<div class="content">

    <!-- Looker -->
    <div id="Baraqah" class="tab-content">
        <div class="looker-container">
            <iframe id="lookerIframe"
                src="https://lookerstudio.google.com/embed/reporting/b460257e-fe39-4a35-aa52-8092a04d5c65/page/JfOWF"
                allowfullscreen>
            </iframe>
        </div>
    </div>

    <!-- PForm -->
    <div id="PForm" class="tab-content">
        <div class="PForm-container">
            <iframe
                src="https://docs.google.com/forms/d/e/1FAIpQLSdtZLcYEJWqFBjXeGnkzF39Z2mmYkdBn7yHp-W7nwl7LfPNIA/viewform?embedded=true">
            </iframe>
        </div>
    </div>

</div>

<script>
/* ------------ Looker Scaling ------------ */
const intrinsicW = 2000;
const intrinsicH = 1100;

function scaleLooker() {
    const iframe = document.getElementById("lookerIframe");
    if (!iframe) return;

    const container = iframe.parentElement;
    const cw = container.clientWidth;
    const ch = container.clientHeight;

    const scale = Math.min(cw / intrinsicW, ch / intrinsicH);

    iframe.style.transform = `scale(${scale})`;
    iframe.style.left = ((cw - intrinsicW * scale) / 2) + "px";
    iframe.style.top = ((ch - intrinsicH * scale) / 2) + "px";
}

/* ------------ Tabs Logic ------------ */
function openTab(evt, id) {
    document.querySelectorAll('.tab-content')
        .forEach(t => t.classList.remove('active-tab'));

    document.querySelectorAll('.tab-button')
        .forEach(b => b.classList.remove('active'));

    document.getElementById(id).classList.add('active-tab');
    if (evt) evt.currentTarget.classList.add('active');

    if (id === 'Baraqah') {
        setTimeout(scaleLooker, 100);
    }
}

/* ------------ Init ------------ */
openTab(null, 'Baraqah');
document.querySelector('.tab-button').classList.add('active');
window.addEventListener('resize', scaleLooker);
</script>

</body>
</html>
